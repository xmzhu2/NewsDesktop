<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>public&#x2F;animation&#x2F;base&#x2F;ShakeAnimation.js - Desktop</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="Desktop"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Desktop.animation.BaseAnimation.html">Desktop.animation.BaseAnimation</a></li>
            
                <li><a href="..&#x2F;classes/Desktop.animation.ShakeAnimation.html">Desktop.animation.ShakeAnimation</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/animation 动画模块.html">animation 动画模块</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: public&#x2F;animation&#x2F;base&#x2F;ShakeAnimation.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * Created with JetBrains WebStorm.
 * User: rongwang
 * Date: 13-4-18
 * Time: 下午12:01
 * To change this template use File | Settings | File Templates.
 *&#x2F;


&#x2F;**
 *
 * 抖动动画类&lt;br&#x2F;&gt;
 * 提供抖动动画效果，可以对指定的dom(下一个版本可能对指定的panel等做操作)
 * @extends Desktop.animation.BaseAnimation
 * @class ShakeAnimation
 * @namespace Desktop.animation
 * @module animation 动画模块
 *&#x2F;
Ext.define(&#x27;Desktop.animation.ShakeAnimation&#x27;,{
    extend:&#x27;Desktop.animation.BaseAnimation&#x27;,

    statics:{

        cls:{
            shakeClick:&#x27;shake_click&#x27;,
            shakeBase:&#x27;shake_base&#x27;,
            shakeBig:&#x27;shake_big&#x27;
        },

        &#x2F;**
         * 抖动方法
         * @method shake
         * @static
         * @param dom 需要抖动的dom
         * @param config 抖动参数
         *&#x2F;
        shake:function(dom,config,callback){
            if(Ext.typeOf(config) == &#x27;function&#x27;){
                callback = config;
                config = {};
            }
            var animation = Desktop.animation.ShakeAnimation,
                el = Ext.get(dom),
                cls =animation.cls;
            el.addCls(cls.shakeBase);
            var shakeO = animation.randomShakeConfig(el,config);
            var callback_=animation.initConfig(el,config);
            Ext.create(&#x27;Ext.fx.Animator&#x27;, {
                target: el,
                duration: config.time || 2000,
                keyframes: shakeO.keyFrames,
                listeners:{
                    afteranimate:function(){
                        el.removeCls(cls.shakeBase);
                        if(callback) callback();
                        callback_();
                    }
                }
            });
        },

        &#x2F;**
         * 上下(纵向)抖动方法
         * @static
         * @method shakeH
         * @param dom 抖动的dom
         *&#x2F;
        shakeH :function(dom){
            Desktop.animation.ShakeAnimation.shake(dom,{left:false});
        },

        &#x2F;**
         * 左右(水平)抖动方法
         * @static
         * @method shakeV
         * @param dom 抖动的dom
         *&#x2F;
        shakeV:function(dom){
            Desktop.animation.ShakeAnimation.shake(dom,{top:false});
        },

        &#x2F;**
         * 通过配置，生成当前抖动的样式，比如 滚动过程中加粗，滚动过程中变色，等等
         * @static
         * @param el 抖动dom封装好的el
         * @param config 抖动参数
         * @return {Function}
         *&#x2F;
        initConfig:function(el,config){
            var cls = cls = Desktop.animation.ShakeAnimation.cls;
            var callback_cls = [];
            if(config.bigMore){
                el.addCls(cls.shakeBig);
                callback_cls.push(cls.shakeBig);
            }
            return function(){
                 for(var i=0;i&lt;callback_cls.length;i++){
                        el.removeCls(callback_cls[i]);
                    }
               }
        },

        &#x2F;**
         * 返回随机抖动的参数对象
         * @protected
         * @param el 抖动dom封装好的el
         * @param config 抖动参数
         * @return {*} 生成的 随机抖动参数{keyFrames:{&#x27;这是过程&#x27;},callback:{&quot;这是回调&quot;}}
         *&#x2F;
        randomShakeConfig:function(el,config){
            var cls = cls = Desktop.animation.ShakeAnimation.cls;
            var keyFrames = {};
            var top = el.getTop(),left = el.getLeft();
            &#x2F;&#x2F;设置抖动过程中抖动状态
            for(var i = 0 ; i&lt; 25; i++){
                keyFrames[i*2]={
                    top : top + ((config.top !=null &amp;&amp;config.top == false)?0:Ext.Number.randomInt(-5,5)),
                    left :left +((config.left != null &amp;&amp;config.left == false)?0:Ext.Number.randomInt(-5,5))
                };
                keyFrames[i*2+2]={
                    top:top,
                    left:left
                };
            }
            return {
                keyFrames:keyFrames
            } ;
        },
        &#x2F;**
         * @method smoothShake
         * @param dom 抖动dom
         * @param config 抖动参数
         *&#x2F;
        smoothShakeConfig:function(dom,config){
            var el = Ext.get(dom),
                top = el.getTop(),left = el.getLeft();
             el.addCls(&#x27;shakeing&#x27;);
            var keyFrames = {},directionFlag = 1;
            &#x2F;&#x2F;设置抖动过程中抖动状态
            for(var i = 0 ; i&lt; 25; i++){
                keyFrames[i*2]={
                    top : top + (config.top !=null &amp;&amp;config.top == false)?0:Ext.Number.randomInt(-5,5),
                    left :left +(config.left != null &amp;&amp;config.left == false)?0:Ext.Number.randomInt(-5,5)
                };
                keyFrames[i*2+2]={
                    top:top,
                    left:left
                };
            }

            Ext.create(&#x27;Ext.fx.Animator&#x27;, {
                target: el,
                duration: config.time || 2000,
                keyframes: keyFrames
            });
        },

        &#x2F;****************&#x2F;
        &#x2F;**
         *
         * @param dom
         * @param config
         * @param callback
         *&#x2F;
        shakeOnClick:function(dom,config,callback){
            var animation = Desktop.animation.ShakeAnimation,
                el = Ext.get(dom),
                cls =animation.cls;
            el.addCls(cls.shakeClick);
            el.on(&#x27;click&#x27;,function(){
                animation.shake(dom,config,callback);
            })
        }
    }
})
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
